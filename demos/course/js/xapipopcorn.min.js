(function(e){function r(t,r,i,s,o,u,a){function T(t){var n={actor:x,object:S};if(m){n["context"]=m}if(v){if(m){n["context"]["contextActivities"]["other"]=[{id:"compID:"+v}]}else{n["context"]={contextActivities:{other:[{id:"compID:"+v}]}}}}if(t){n["verb"]=e.verbs.launched}else{var r="PT"+f.roundTime()+"S";n["verb"]=e.verbs.resumed;n["result"]={extensions:{"resultExt:resumed":r}}}A(n)}function N(t,n){var r={id:E+"#"+t,definition:{name:{"en-US":l+"#"+t}}};var i="PT"+n+"S";var s="resultExt:"+t;var o={extensions:{}};var u={actor:x,verb:e.verbs.progressed,object:r,result:o};if(m){u["context"]=a;u["context"]["contextActivities"]["parent"].push({id:E})}if(v){if(m){u["context"]["contextActivities"]["other"]=[{id:"compID:"+v}]}else{u["context"]={contextActivities:{other:[{id:"compID:"+v}]}}}}o["extensions"][s]=i;A(u)}function C(t){var n="PT"+t+"S";var r={actor:x,verb:e.verbs.suspended,object:S,result:{extensions:{"resultExt:paused":n}}};if(m){r["context"]=m}if(v){if(m){r["context"]["contextActivities"]["other"]=[{id:"compID:"+v}]}else{r["context"]={contextActivities:{other:[{id:"compID:"+v}]}}}}A(r)}function k(t){var n="PT"+t+"S";var r={actor:x,verb:e.verbs.interacted,object:S,result:{extensions:{"resultExt:seeked":n}}};if(m){r["context"]=m}if(v){if(m){r["context"]["contextActivities"]["other"]=[{id:"compID:"+v}]}else{r["context"]={contextActivities:{other:[{id:"compID:"+v}]}}}}A(r)}function L(t){var n="PT"+Math.round(t)+"S";var r={actor:x,verb:e.verbs.completed,object:S,result:{duration:n,completion:true}};if(m){r["context"]=m}if(v){if(m){r["context"]["contextActivities"]["other"]=[{id:"compID:"+v}]}else{r["context"]={contextActivities:{other:[{id:"compID:"+v}]}}}}A(r);c=h=p=false}function A(t){if(t){t["timestamp"]=(new Date).toISOString();if(d){e.XAPIWrapper.sendStatement(t,function(){})}else{n("would send this statement if 'isTracking' was true.");n(t)}}}var f=t;var l=t.media.id;var c=false;var h=false;var p=false;var d=true;var v=r;var m=a;var g=u;var y=o;var b=s;var w=i;var E="act:unknown";if(t.media.children){E=t.media.children[0].src}else{E=t.media.src}var S={id:E,definition:{name:{"en-US":l}}};var x=e.XAPIWrapper.lrs.actor?e.XAPIWrapper.lrs.actor:{account:{name:"tester",homePage:"uri:testaccount"}};f.on("play",function(){if(w){var e=f.currentTime();if(e==Math.round(f.duration())){n("youtube video "+l+" launched weird");T(true)}else if(e!=0){n("video "+l+" resumed");T(false)}else{n("video "+l+" launched");T(true)}}});f.on("timeupdate",function(){if(g){var e=f.roundTime();if(!c&&e==Math.round(f.duration()*.25)){n("video "+l+" first point");c=true;N("firstquartile",e)}else if(!h&&e==Math.round(f.duration()*.5)){n("video "+l+" half point");h=true;N("halfway",e)}else if(!p&&e==Math.round(f.duration()*.75)){n("video "+l+" third point");p=true;N("thirdquartile",e)}}});f.on("pause",function(){if(b){var e=f.roundTime();if(e!=Math.round(f.duration())){n("video "+l+" paused");C(e)}}});f.on("seeked",function(){if(y){var e=f.roundTime();if(e!=0){n("seeked "+l+" to "+e);k(e)}else{n("seeked to 0s so really launched "+l);T(true);c=h=p=false}}});f.on("ended",function(){n("video "+l+" ended");L(f.duration())});this.report=A}var t=true;var n=function(e){if(!t)return false;try{console.log(e);return true}catch(n){return false}};var i=function(){this._videos={}};i.prototype.addVideo=function(e,t,n,i,s,o,u){try{var a=e.media.id;var f=new r(e,t,n,i,s,o,u)}catch(l){throw"Cannot add video: "+l.message}this._videos[a]=f;return true};i.prototype.getVideo=function(e){try{return this._videos[e]}catch(t){return{}}};i.prototype.getVideos=function(){var e=[];for(var t in this._videos){e.push(t)}return e};e.XAPIVideo=new i})(window.ADL=window.ADL||{})